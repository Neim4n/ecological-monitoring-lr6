<div class="lr__table">
    <select class="lr__input lr__select" name="type"
            [(ngModel)]="this.selectedLossesType" required (change)="filterObjects()">
        <option value="null" disabled selected hidden>–¢–∏–ø –∑–±–∏—Ç–∫—ñ–≤</option>
        <option value="1">
            –ó–±–∏—Ç–∫–∏ –≤—ñ–¥ –≤—Ç—Ä–∞—Ç–∏ –∂–∏—Ç—Ç—è —Ç–∞ –∑–¥–æ—Ä–æ–≤'—è –Ω–∞—Å–µ–ª–µ–Ω–Ω—è
        </option>
        <option value="2">
            –ó–±–∏—Ç–∫–∏ –≤—ñ–¥ —Ä—É–π–Ω—É–≤–∞–Ω–Ω—è —Ç–∞ –ø–æ—à–∫–æ–¥–∂–µ–Ω–Ω—è –æ—Å–Ω–æ–≤–Ω–∏—Ö —Ñ–æ–Ω–¥—ñ–≤, –∑–Ω–∏—â–µ–Ω–Ω—è –º–∞–π–Ω–∞ —Ç–∞ –ø—Ä–æ–¥—É–∫—Ü—ñ—ó
        </option>
        <option value="4">
            –ó–±–∏—Ç–∫–∏ –≤—ñ–¥ –≤–∏–ª—É—á–µ–Ω–Ω—è –∞–±–æ –ø–æ—Ä—É—à–µ–Ω–Ω—è —Å—ñ–ª—å—Å—å–∫–æ–≥–æ—Å–ø–æ–¥–∞—Ä—Å—å–∫–∏—Ö —É–≥—ñ–¥—å
        </option>
        <option value="6">
            –ó–±–∏—Ç–∫–∏ –≤—ñ–¥ –≤—Ç—Ä–∞—Ç–∏ –¥–µ—Ä–µ–≤–∏–Ω–∏ —Ç–∞ —ñ–Ω—à–∏—Ö –ª—ñ—Å–æ–≤–∏—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤
        </option>
    </select>

    <table class="lr__table-container">
        <tr class="lr__table-tr tr-header">
            <th class="nowrap">‚Ññ –∑/–ø</th>
            <th>–ù–∞–¥–∑–≤–∏—á–∞–π–Ω–∞ —Å–∏—Ç—É–∞—Ü—ñ—è</th>
            <!-- LOSSES -->
            <ng-container *ngIf="+selectedLossesType === 1">
                <th>–í—Ç—Ä–∞—Ç–∏ –≤—ñ–¥ –ª–µ–≥–∫–æ–≥–æ –Ω–µ—â–∞—Å–Ω–æ–≥–æ –≤–∏–ø–∞–¥–∫—É <br/> (MlN)</th>
                <th>–í—Ç—Ä–∞—Ç–∏ –≤—ñ–¥ —Ç—è–∂–∫–æ–≥–æ –Ω–µ—â–∞—Å–Ω–æ–≥–æ –≤–∏–ø–∞–¥–∫—É <br/> (MtN)</th>
                <th>–í—Ç—Ä–∞—Ç–∏ –≤—ñ–¥ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ª—é–¥–∏–Ω–æ—é —ñ–Ω–≤–∞–ª—ñ–¥–Ω–æ—Å—Ç—ñ <br/> (Mi)</th>
                <th>–í—Ç—Ä–∞—Ç–∏ –≤—ñ–¥ –∑–∞–≥–∏–±–µ–ª—ñ –ª—é–¥–∏–Ω–∏ <br/> (MzN)</th>
                <th>–ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ—Å—Ç—Ä–∞–∂–¥–∞–ª–∏—Ö <br/> (Nz)</th>
                <!-- CALCULATED -->
                <th>–í—Ç—Ä–∞—Ç–∏ –≤—ñ–¥ –≤–∏–±—É—Ç—Ç—è —Ç—Ä—É–¥–æ–≤–∏—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤ –∑ –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–∞ <br/> (Svtrr)</th>
                <th>–í–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ –≤–∏–ø–ª–∞—Ç—É –¥–æ–ø–æ–º–æ–≥–∏ –Ω–∞ –ø–æ—Ö–æ–≤–∞–Ω–Ω—è <br/> (Svdp)</th>
                <th>–í–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ –≤–∏–ø–ª–∞—Ç—É –ø–µ–Ω—Å—ñ–π —É —Ä–∞–∑—ñ –≤—Ç—Ä–∞—Ç–∏ –≥–æ–¥—É–≤–∞–ª—å–Ω–∏–∫–∞ <br/> (Svvth)</th>
                <th>–†–æ–∑–º—ñ—Ä –∑–±–∏—Ç–∫—ñ–≤ –≤—ñ–¥ –≤—Ç—Ä–∞—Ç–∏ –∂–∏—Ç—Ç—è —Ç–∞ –∑–¥–æ—Ä–æ–≤'—è –Ω–∞—Å–µ–ª–µ–Ω–Ω—è <br/> (Nr)</th>
            </ng-container>

            <ng-container *ngIf="+selectedLossesType === 2">
                <th>–ó–±–∏—Ç–∫–∏ –≤—ñ–¥ —Ä—É–π–Ω—É–≤–∞–Ω–Ω—è —Ç–∞ –ø–æ—à–∫–æ–¥–∂–µ–Ω–Ω—è –æ—Å–Ω–æ–≤–Ω–∏—Ö —Ñ–æ–Ω–¥—ñ–≤ –≤–∏—Ä–æ–±–Ω–∏—á–æ–≥–æ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è<br/> (fv)</th>
                <th>–ó–±–∏—Ç–∫–∏ –≤—ñ–¥ —Ä—É–π–Ω—É–≤–∞–Ω–Ω—è —Ç–∞ –ø–æ—à–∫–æ–¥–∂–µ–Ω–Ω—è –æ—Å–Ω–æ–≤–Ω–∏—Ö —Ñ–æ–Ω–¥—ñ–≤ –Ω–µ–≤–∏—Ä–æ–±–Ω–∏—á–æ–≥–æ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è<br/> (fg)</th>
                <th>–ó–±–∏—Ç–∫–∏ –≤—ñ–¥ –≤—Ç—Ä–∞—Ç –≥–æ—Ç–æ–≤–æ—ó –ø—Ä–æ–º–∏—Å–ª–æ–≤–æ—ó —Ç–∞ —Å—ñ–ª—å—Å—å–∫–æ–≥–æ—Å–ø–æ–¥–∞—Ä—Å—å–∫–æ—ó –ø—Ä–æ–¥—É–∫—Ü—ñ—ó<br/> (pr)</th>
                <th>–ó–±–∏—Ç–∫–∏ –≤—ñ–¥ –≤—Ç—Ä–∞—Ç –Ω–µ–∑—ñ–±—Ä–∞–Ω–æ—ó —Å—ñ–ª—å—Å—å–∫–æ–≥–æ—Å–ø–æ–¥–∞—Ä—Å—å–∫–æ—ó –ø—Ä–æ–¥—É–∫—Ü—ñ—ó<br/> (prs)</th>
                <th>–ó–±–∏—Ç–∫–∏ –≤—ñ–¥ –≤—Ç—Ä–∞—Ç –∑–∞–ø–∞—Å—ñ–≤ —Å–∏—Ä–æ–≤–∏–Ω–∏ <br/> (sn)</th>
                <th>–ó–±–∏—Ç–∫–∏ –≤—ñ–¥ –≤—Ç—Ä–∞—Ç –º–∞–π–Ω–∞ –≥—Ä–æ–º–∞–¥—è–Ω —Ç–∞ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ–π <br/> (mdg)</th>
                <!-- CALCULATED -->
                <th>–ó–±–∏—Ç–∫–∏ –≤—ñ–¥ —Ä—É–π–Ω—É–≤–∞–Ω–Ω—è —Ç–∞ –ø–æ—à–∫–æ–¥–∂–µ–Ω–Ω—è –æ—Å–Ω–æ–≤–Ω–∏—Ö —Ñ–æ–Ω–¥—ñ–≤ <br/> (mr)</th>
            </ng-container>

            <ng-container *ngIf="+selectedLossesType === 4">
                <th>–ù–æ—Ä–º–∞—Ç–∏–≤ –∑–±–∏—Ç–∫—ñ–≤ <br/> (n)</th>
                <th>–ü–ª–æ—â–∞ —Å—ñ–ª—å—Å—å–∫–æ–≥–æ—Å–ø–æ–¥–∞—Ä—Å—å–∫–∏—Ö —É–≥—ñ–¥—å <br/> (p)</th>
                <!-- CALCULATED -->
                <th>–ó–±–∏—Ç–∫–∏ –≤—ñ–¥ –≤–∏–ª—É—á–µ–Ω–Ω—è —Å—ñ–ª—å—Å—å–∫–æ–≥–æ—Å–ø–æ–¥–∞—Ä—Å—å–∫–∏—Ö —É–≥—ñ–¥—å <br/> (rsg1)</th>
                <th>–ó–±–∏—Ç–∫–∏ –≤—ñ–¥ –ø–æ—Ä—É—à–µ–Ω–Ω—è —Å—ñ–ª—å—Å—å–∫–æ–≥–æ—Å–ø–æ–¥–∞—Ä—Å—å–∫–∏—Ö —É–≥—ñ–¥—å <br/> (rsg2)</th>
                <th>–ó–±–∏—Ç–∫–∏ –≤—ñ–¥ –≤–∏–ª—É—á–µ–Ω–Ω—è —Ç–∞ –ø–æ—Ä—É—à–µ–Ω–Ω—è —Å—ñ–ª—å—Å—å–∫–æ–≥–æ—Å–ø–æ–¥–∞—Ä—Å—å–∫–∏—Ö —É–≥—ñ–¥—å<br/> (rsg)</th>
            </ng-container>

            <ng-container *ngIf="+selectedLossesType === 6">
                <th>–ù–æ—Ä–º–∞—Ç–∏–≤ –∑–±–∏—Ç–∫—ñ–≤ <br/> (n)</th>
                <th>–ö–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –ª—ñ—Å—ñ–≤ <br/> (k)</th>
                <th>–ü–ª–æ—â–∞ –ª—ñ—Å–æ–≤–æ—ó –¥—ñ–ª—è–Ω–∫–∏ <br/> (p)</th>
                <th>–ù–æ—Ä–º–∞—Ç–∏–≤ –∑–±–∏—Ç–∫—ñ–≤, –¥–æ —è–∫–∏—Ö —É–≥—ñ–¥–¥—è –≤—ñ–¥–Ω–æ—Å–∏–ª–∏—Å—è<br/> (N1)</th>
                <th>–ù–æ—Ä–º–∞—Ç–∏–≤ –∑–±–∏—Ç–∫—ñ–≤, –ø—ñ—Å–ª—è —à–∫—ñ–¥–ª–∏–≤–æ–≥–æ –≤–ø–ª–∏–≤—É <br/> (N2)</th>
                <!-- CALCULATED -->
                <th>–ó–±–∏—Ç–∫–∏ –≤—ñ–¥ –∑–Ω–∏—â–µ–Ω–Ω—è –ª—ñ—Å—É <br/> (rlg1)</th>
                <th>–ó–±–∏—Ç–∫–∏ –≤—ñ–¥ –ø–æ—à–∫–æ–¥–∂–µ–Ω–Ω—è –ª—ñ—Å—ñ–≤ <br/> (rlg2)</th>
                <th>–ó–±–∏—Ç–∫–∏ –¥–ª—è –ª—ñ—Å—ñ–≤ —É –º–µ–Ω—à —Ü—ñ–Ω–Ω—ñ–π –≥—Ä—É–ø—ñ <br/> (rlg3)</th>
                <th>–ó–±–∏—Ç–∫—ñ–≤ –≤—ñ–¥ –≤—Ç—Ä–∞—Ç–∏ –¥–µ—Ä–µ–≤–∏–Ω–∏ —Ç–∞ —ñ–Ω—à–∏—Ö –ª—ñ—Å–æ–≤–∏—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤<br/> (rlg)</th>
            </ng-container>

            <th>–ó–∞–≥–∞–ª—å–Ω—ñ –∑–±–∏—Ç–∫–∏<br/> (zbytky)</th>
        </tr>
        <tr *ngIf="loading" class="lr__table-tr loading">
            <th colspan="7">Loading...</th>
        </tr>
        <ng-container *ngFor="let object of filteredObjects; let j = index">
            <tr class="lr__table-tr loading" *ngFor="let info of object['losses']; let i = index">
                <!-- Info -->
                <td class="lr__table-td" *ngIf="i== 0" [attr.rowspan]="object['losses'].length">
                    {{object.id + 1}}
                    <div class="lr__table-td-controls">
                        <button (click)="onDelete(object.id)" class="delete">
                            <mat-icon>clear</mat-icon>
                        </button>
                        <button *ngIf="!object.isEditing" (click)="toggleObjectEdit(j)" class="edit">
                            <mat-icon>mode_edit</mat-icon>
                        </button>
                        <button *ngIf="object.isEditing" (click)="saveEditObject(j)" class="save">
                            <mat-icon>done</mat-icon>
                        </button>
                    </div>
                </td>
                <td class="lr__table-td name" *ngIf="i===0" [attr.rowspan]="object['losses'].length">
                    <span *ngIf="!object.isEditing">{{object.name}}</span>
                    <input *ngIf="object.isEditing" type="text"
                           [(ngModel)]="filteredObjects[j].name">
                    <a href="{{object['sources']}}">üõà</a>
                </td>
                <ng-container *ngIf="+selectedLossesType === info.type && +selectedLossesType === 1">
                    <!-- Emission -->
                    <td>
                        <span *ngIf="!object.isEditing">{{info.MlN}}</span>
                        <input *ngIf="object.isEditing" type="number"
                               [(ngModel)]="filteredObjects[j]['losses'][i]['MlN']">
                    </td>
                    <td>
                        <span *ngIf="!object.isEditing">{{info.MtN}}</span>
                        <input *ngIf="object.isEditing" type="number"
                               [(ngModel)]="filteredObjects[j]['losses'][i]['MtN']">
                    </td>
                    <td>
                        <span *ngIf="!object.isEditing">{{info.Mi}}</span>
                        <input *ngIf="object.isEditing" type="number"
                               [(ngModel)]="filteredObjects[j]['losses'][i]['Mi']">
                    </td>
                    <td>
                        <span *ngIf="!object.isEditing">{{info.MzN}}</span>
                        <input *ngIf="object.isEditing" type="number"
                               [(ngModel)]="filteredObjects[j]['losses'][i]['MzN']">
                    </td>
                    <td>
                        <span *ngIf="!object.isEditing">{{info.Nz}}</span>
                        <input *ngIf="object.isEditing" type="number"
                               [(ngModel)]="filteredObjects[j]['losses'][i]['Nz']">
                    </td>

                    <!-- Calculated -->
                    <td class="nowrap">
                        {{info.Svtrr || info.Svtrr === 0 ? info.Svtrr.toFixed(3) : ' '}}
                    </td>
                    <td class="nowrap">
                        {{info.Svdp || info.Svdp === 0 ? info.Svdp.toFixed(3) : ' '}}
                    </td>
                    <td class="nowrap">
                        {{info.Svvth || info.Svvth === 0 ? info.Svvth.toFixed(3) : ' '}}
                    </td>
                    <td class="nowrap">
                        {{info.Nr || info.Nr === 0 ? info.Nr.toFixed(3) : ' '}}
                    </td>
                </ng-container>
                <ng-container *ngIf="+selectedLossesType === info.type && +selectedLossesType === 2">
                    <!-- Emission -->
                    <td>
                        <span *ngIf="!object.isEditing">{{info.fv}}</span>
                        <input *ngIf="object.isEditing" type="number"
                               [(ngModel)]="filteredObjects[j]['losses'][i]['fv']">
                    </td>
                    <td>
                        <span *ngIf="!object.isEditing">{{info.fg}}</span>
                        <input *ngIf="object.isEditing" type="number"
                               [(ngModel)]="filteredObjects[j]['losses'][i]['fg']">
                    </td>
                    <td>
                        <span *ngIf="!object.isEditing">{{info.pr}}</span>
                        <input *ngIf="object.isEditing" type="number"
                               [(ngModel)]="filteredObjects[j]['losses'][i]['pr']">
                    </td>
                    <td>
                        <span *ngIf="!object.isEditing">{{info.prs}}</span>
                        <input *ngIf="object.isEditing" type="number"
                               [(ngModel)]="filteredObjects[j]['losses'][i]['prs']">
                    </td>
                    <td>
                        <span *ngIf="!object.isEditing">{{info.sn}}</span>
                        <input *ngIf="object.isEditing" type="number"
                               [(ngModel)]="filteredObjects[j]['losses'][i]['sn']">
                    </td>
                    <td>
                        <span *ngIf="!object.isEditing">{{info.mdg}}</span>
                        <input *ngIf="object.isEditing" type="number"
                               [(ngModel)]="filteredObjects[j]['losses'][i]['mdg']">
                    </td>

                    <!-- Calculated -->
                    <td class="nowrap">
                        {{info.mr || info.mr === 0 ? info.mr.toFixed(3) : ' '}}
                    </td>
                </ng-container>
                <ng-container *ngIf="+selectedLossesType === info.type && +selectedLossesType === 4">
                    <!-- Emission -->
                    <td>
                        <span *ngIf="!object.isEditing">{{info.n}}</span>
                        <input *ngIf="object.isEditing" type="number"
                               [(ngModel)]="filteredObjects[j]['losses'][i]['n']">
                    </td>
                    <td>
                        <span *ngIf="!object.isEditing">{{info.p}}</span>
                        <input *ngIf="object.isEditing" type="number"
                               [(ngModel)]="filteredObjects[j]['losses'][i]['p']">
                    </td>
                    <!-- Calculated -->
                    <td class="nowrap">
                        {{info.rsg1 || info.rsg1 === 0 ? info.rsg1.toFixed(3) : ' '}}
                    </td>
                    <td class="nowrap">
                        {{info.rsg2 || info.rsg2 === 0 ? info.rsg2.toFixed(3) : ' '}}
                    </td>
                    <td class="nowrap">
                        {{info.rsg || info.rsg === 0 ? info.rsg.toFixed(3) : ' '}}
                    </td>
                </ng-container>
                <ng-container *ngIf="+selectedLossesType === info.type && +selectedLossesType === 6">
                    <!-- Emission -->
                    <td>
                        <span *ngIf="!object.isEditing">{{info.n}}</span>
                        <input *ngIf="object.isEditing" type="number"
                               [(ngModel)]="filteredObjects[j]['losses'][i]['n']">
                    </td>
                    <td>
                        <span *ngIf="!object.isEditing">{{info.k}}</span>
                        <input *ngIf="object.isEditing" type="number"
                               [(ngModel)]="filteredObjects[j]['losses'][i]['k']">
                    </td>
                    <td>
                        <span *ngIf="!object.isEditing">{{info.p}}</span>
                        <input *ngIf="object.isEditing" type="number"
                               [(ngModel)]="filteredObjects[j]['losses'][i]['p']">
                    </td>
                    <td>
                        <span *ngIf="!object.isEditing">{{info.N1}}</span>
                        <input *ngIf="object.isEditing" type="number"
                               [(ngModel)]="filteredObjects[j]['losses'][i]['N1']">
                    </td>
                    <td>
                        <span *ngIf="!object.isEditing">{{info.N2}}</span>
                        <input *ngIf="object.isEditing" type="number"
                               [(ngModel)]="filteredObjects[j]['losses'][i]['N2']">
                    </td>
                    <!-- Calculated -->
                    <td class="nowrap">
                        {{info.rlg1 || info.rlg1 === 0 ? info.rlg1.toFixed(3) : ' '}}
                    </td>
                    <td class="nowrap">
                        {{info.rlg2 || info.rlg2 === 0 ? info.rlg2.toFixed(3) : ' '}}
                    </td>
                    <td class="nowrap">
                        {{info.rlg3 || info.rlg3 === 0 ? info.rlg3.toFixed(3) : ' '}}
                    </td>
                    <td class="nowrap">
                        {{info.rlg || info.rlg === 0 ? info.rlg.toFixed(3) : ' '}}
                    </td>
                </ng-container>
                <td class="lr__table-td" *ngIf="i===0" [attr.rowspan]="object['losses'].length">
                    {{object.zbytky || object.zbytky === 0 ? object.zbytky.toFixed(3) : ' '}}
                </td>
            </tr>
        </ng-container>
    </table>
    <div class="lr__table-control">
        <button class="lr__table-button" [disabled]="isChecked" (click)="calculateLosses()">
            –û–±—Ä–∞—Ö—É–≤–∞—Ç–∏ –∑–±–∏—Ç–∫–∏
        </button>
    </div>
</div>
